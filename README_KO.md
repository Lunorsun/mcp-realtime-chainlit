# 📔 오늘의 자아 로그 (Today's Self Journal)

> **당신의 하루를 기록하면, AI가 감정을 읽어줍니다**
> 
> 파스텔 톤의 따뜻한 감정 저널 앱으로 자신의 마음을 들여다보세요.

---

## 🎯 프로젝트 소개

**'오늘의 자아 로그'**는 사용자의 일상을 한 줄로 기록하면, AI가 감정을 분석하고 성찰 질문을 던져주는 **감정 저널 앱**입니다.

단순한 기록을 넘어, **3단계 깊이의 성찰 질문**을 통해 자신의 마음을 더 깊이 있게 이해할 수 있습니다.

### ✨ 핵심 특징

- 🎭 **6가지 감정 인식**: 지침, 회피, 성취, 기대, 불안, 고요
- 💬 **3단계 성찰 질문**: 표면 → 의미 → 존재로 심화되는 질문
- 🎨 **3가지 톤 선택**: 파스텔(부드러움) / 시적(은유) / 철학적(깊음)
- 📊 **감정 트렌드 추적**: 주간 감정 흐름 & 패턴 분석
- 💾 **로컬 저장**: 프라이버시 보호 (클라우드 불필요)
- 🤖 **AI 기반 분석**: Groq Llama 모델 (향후 확장)

---

## 🚀 빠른 시작

### 설치

```bash
# 저장소 복제
git clone https://github.com/Lunorsun/mcp-realtime-chainlit.git
cd mcp-realtime-chainlit

# 가상 환경 생성
python3 -m venv .venv
source .venv/bin/activate

# 의존성 설치
pip install -r requirements.txt
```

### 환경 설정

`.env` 파일을 생성하고 Groq API 키를 설정합니다:

```bash
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=llama-2-13b-chat
```

Groq API 키는 [Groq Console](https://console.groq.com)에서 발급받을 수 있습니다.

### 실행

```bash
chainlit run journal_ui.py
```

브라우저에서 `http://localhost:8000`으로 접속합니다.

---

## 📖 사용 방법

### 1️⃣ 시작하기

앱을 열면 **톤 선택** 버튼이 나타납니다:

- **따뜻하고 부드러운 (기본)**: 따뜻하고 위로가 담긴 질문
- **시적이고 은유적인**: 시적 표현으로 감정을 표현하는 질문
- **깊고 철학적인**: 존재적 의미를 탐구하는 질문

### 2️⃣ 감정 기록하기

한 줄로 당신의 감정을 적어주세요:

```
예시:
"오늘 프로젝트가 완료돼서 너무 뿌듯해"
"회사에서 시험 때문에 너무 긴장했어"
"혼자 있는 시간이 편했어"
```

### 3️⃣ 분석 결과 보기

입력 후 다음 **4개의 카드**가 나타납니다:

#### 📌 카드 1: 오늘의 감정 시그니처
```
○ 지침
●●○○○
방향: 내부
```
- 감정 유형
- 강도 (1~5)
- 감정의 방향 (내부/외부)

#### 📌 카드 2: 하루의 사건 흐름
```
• 오늘 회사에서 프로젝트 미팅을 했어
  - 장소: 회사 | 원인: 미팅
• 집에 와서 혼자 있었어
  - 장소: 집 | 원인: 휴식
```

#### 📌 카드 3: 성찰 질문 (3단계)
```
1. 오늘 너의 마음 속 가장 부드러웠던 생각은 무엇이었을까?
2. 그 생각은 너에게 어떤 작은 위로를 건네고 싶어 했을까?
3. 이 감정이 너를 지금 이 순간으로 이끈 작은 실마리는 무엇일까?
```

#### 📌 카드 4: 에필로그 + 권장사항
```
**에필로그**: 오늘 너는 자신의 마음에 조용히 손을 내밀었어...

**조언**: 불안감도 감정의 일부일 뿐입니다. 깊게 숨을 쉬어보세요.
```

### 4️⃣ 명령어 사용하기

#### `/help` 또는 `/도움`
모든 기능과 사용 방법을 확인합니다.

#### `/주간`
이번 주 감정 요약을 봅니다:
```
**이번 주 감정 지도**
성취: ●●● (3회)
기대: ●●●● (4회)
불안: ●● (2회)
```

#### `/흐름`
최근 5개의 감정 흐름을 시각화합니다:
```
**최근 감정 흐름** (최근 5개)
1. 불안 ●●●○○
2. 고요 ●●●●○
3. 성취 ●●●●●
4. 불안 ●●○○○
5. 기대 ●●●●●
```

#### `/통찰`
주간 감정 기반 개인화 통찰을 받습니다:
```
이번 주 너는 설레는 마음으로 7번을 기록했어. 
그 기대감이 너를 앞으로 나아가게 해.
```

#### `/톤변경`
질문의 톤을 다시 선택합니다.

---

## 🔍 감정 분류 시스템

앱이 인식하는 **6가지 감정**:

| 감정 | 이모지 | 키워드 예시 | 설명 |
|------|--------|-----------|------|
| **성취** | ◆ | 성공, 완성, 자랑 | 목표를 달성한 기쁨 |
| **기대** | ▲ | 기다림, 설렘, 희망 | 미래에 대한 긍정 |
| **불안** | ▼ | 걱정, 두려움, 떨림 | 불확실함에 대한 두려움 |
| **고요** | ★ | 평온, 차분, 조용 | 마음의 안정감 |
| **회피** | ● | 피하기, 외면, 도망 | 어려움으로부터의 회피 |
| **지침** | ○ | 지쳐, 힘들, 피로 | 방향을 잃은 상태 |

---

## 📊 데이터 저장 구조

모든 기록은 로컬 JSON 파일에 저장됩니다 (`data/patterns.json`):

```json
{
  "entries": [
    {
      "date": "2025-11-14",
      "text": "오늘 프로젝트가 완료돼서 너무 뿌듯해",
      "analysis": {
        "emotion": "성취",
        "intensity": 5,
        "direction": "외부"
      },
      "events": [
        {
          "text": "프로젝트를 완료했어",
          "location": "사무실",
          "cause": "업무 완수",
          "emotion_hint": "성취"
        }
      ]
    }
  ],
  "summary": "최근 기록에서 '성취' 감정이 가장 자주 나타납니다 (3회)."
}
```

---

## 📁 프로젝트 구조

```
mcp-realtime-chainlit/
├── journal_ui.py              # 메인 Chainlit UI
├── analyzer.py                # 감정 분석 엔진
├── event_mapper.py            # 사건 구조화
├── questions.py               # 성찰 질문 생성
├── patterns.py                # 기록 저장 & 패턴 분석
├── emotion_trends.py          # 감정 트렌드 분석
├── tone_config.py             # 톤 설정 & 시각화
├── recommendations.py         # 맞춤 권장사항
├── groq_client.py             # Groq API 클라이언트
├── .env                       # 환경 변수
├── requirements.txt           # 의존성
├── chainlit.md                # Chainlit 커스텀 마크다운
├── README.md                  # 영문 가이드
├── README_KO.md               # 한글 가이드
└── data/
    ├── patterns.json          # 사용자 기록 저장소
    └── emotion_trends.json    # 감정 트렌드 데이터
```

---

## 🔧 모듈별 기능 설명

### `journal_ui.py` — 메인 UI
- Chainlit 웹 인터페이스 관리
- 사용자 입력 처리
- 분석 파이프라인 실행
- 결과 카드 표시
- 명령어 처리

### `analyzer.py` — 감정 분석
- 한국어 키워드 기반 감정 인식
- 감정 강도 (1~5) 계산
- 감정 방향 (내부/외부) 판단

### `event_mapper.py` — 사건 구조화
- 입력 텍스트를 문장 단위로 분리
- 각 사건에서 장소, 원인 추출
- 사건 간 감정적 흐름 파악

### `questions.py` — 성찰 질문
- 3단계 깊이의 질문 생성
- 3가지 톤별 질문 템플릿
- 에필로그 생성

### `patterns.py` — 저장 & 분석
- 기록을 JSON에 저장
- 반복되는 패턴 감지
- 자연어 기반 요약 생성

### `emotion_trends.py` — 트렌드 분석
- 시간에 따른 감정 변화 추적
- 주간 감정 요약
- 개인화된 통찰 메시지 생성

### `tone_config.py` — 시각화
- 감정별 이모지 & 색상 매핑
- 강도 바 시각화

### `recommendations.py` — 권장사항
- 감정별 따뜻한 메시지
- 자기돌봄 팁 제공

---

## 🎨 톤(Tone) 시스템 설명

### 파스텔 톤 (Pastel)
> 따뜻하고 부드러운 감성
```
질문: "오늘 너의 마음 속 가장 부드러웠던 생각은 무엇이었을까?"
특징: 위로가 담긴, 긍정적인 표현
```

### 시적 톤 (Poetic)
> 은유와 시적 표현
```
질문: "너의 감정 속에서 찾아낼 수 있는 가장 아름다운 순간은?"
특징: 메타포, 이미지 중심
```

### 철학적 톤 (Existential)
> 깊고 존재적인 탐구
```
질문: "이 순간이 너라는 존재에 어떤 의미를 더해주는가?"
특징: 본질, 의미, 자아 탐구
```

---

## 💡 사용 시나리오

### 시나리오 1: 스트레스 해소
```
입력: "오늘 회사에서 미팅이 너무 힘들었어. 많은 사람이 있었고 질문이 많았어."
↓
감정: 불안 (강도 4)
↓
질문들이 당신의 불안감을 인정하고, 그 불안의 의미를 탐구하도록 도와줍니다.
↓
자기돌봄: "불안감도 감정의 일부입니다. 깊게 숨을 쉬어보세요."
```

### 시나리오 2: 성취 기록
```
입력: "프로젝트를 완료했어! 정말 뿌듯하다."
↓
감정: 성취 (강도 5)
↓
질문들이 당신의 성취의 의미와 그것이 당신에게 무엇을 가르쳐 주었는지를 탐구합니다.
↓
자기돌봄: "이 성취감을 마음속에 담아두고, 어려울 때 기억해보세요."
```

### 시나리오 3: 주간 분석
```
명령어: /주간
↓
이번 주 감정 지도가 표시됩니다
↓
명령어: /통찰
↓
"이번 주 너는 도전 앞에서 불안을 느끼지만, 그 후 성취감으로 이어지는 
패턴이 있어. 그 과정 속에서 너는 자신을 믿는 법을 배우고 있어."
```

---

## 🔄 전체 작동 흐름

```
┌─────────────────┐
│  사용자 시작    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  톤 선택        │
│ (Pastel/Poetic/│
│ Existential)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  감정 입력      │
│ (한 줄 기록)    │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│  분석 파이프라인                        │
├─────────────────────────────────────────┤
│ ✓ analyzer.py: 감정 인식                │
│ ✓ event_mapper.py: 사건 구조화          │
│ ✓ questions.py: 질문 생성               │
│ ✓ recommendations.py: 권장사항          │
│ ✓ patterns.py: 저장 & 패턴 분석         │
│ ✓ emotion_trends.py: 트렌드 기록        │
└────────┬────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  결과 표시 (4개 카드)           │
├─────────────────────────────────┤
│ 1. 감정 시그니처                │
│ 2. 사건 흐름                    │
│ 3. 성찰 질문                    │
│ 4. 에필로그 + 권장사항          │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────┐
│  명령어 사용 가능           │
│ /help, /주간, /흐름        │
│ /통찰, /톤변경             │
└────────┬────────────────────┘
         │
         ▼
┌─────────────────┐
│  다시 기록하기  │
└─────────────────┘
```

---

## 📋 명령어 전체 목록

| 명령어 | 기능 | 예시 출력 |
|--------|------|---------|
| `/help` 또는 `/도움` | 전체 사용 가이드 표시 | 모든 명령어와 사용법 |
| `/주간` | 이번 주 감정 요약 | "성취: ●●● (3회)" |
| `/흐름` | 최근 5개 감정 흐름 | "불안 → 고요 → 성취..." |
| `/통찰` | 주간 기반 통찰 메시지 | "너는 도전 앞에서..." |
| `/톤변경` | 질문 톤 재선택 | 톤 선택 버튼 재표시 |

---

## 🛠️ 기술 스택

- **프레임워크**: Chainlit (웹 UI)
- **언어**: Python 3.12+
- **AI 모델**: Groq Llama-2-13b-chat (선택사항)
- **저장소**: 로컬 JSON
- **의존성**: 
  - chainlit
  - python-dotenv
  - requests (Groq API 호출용)

---

## 📦 의존성 설치

`requirements.txt`:
```
chainlit>=0.7.0
python-dotenv>=0.19.0
requests>=2.28.0
```

```bash
pip install -r requirements.txt
```

---

## 🔐 개인정보 보호

✅ **모든 데이터는 로컬에 저장됩니다**
- 클라우드 전송 없음
- 개인 컴퓨터에만 저장
- `.gitignore`에 데이터 폴더 추가됨

---

## 🚧 향후 기능 확장

- [ ] Groq를 활용한 동적 질문 생성
- [ ] 월간 감정 리포트 (차트)
- [ ] 감정 기반 음악/책 추천
- [ ] 다국어 지원
- [ ] 모바일 앱 버전
- [ ] 클라우드 동기화 (선택사항)

---

## 📞 문의 및 피드백

버그 리포트나 기능 제안은 [GitHub Issues](https://github.com/Lunorsun/mcp-realtime-chainlit/issues)에서 해주세요.

---

## 📄 라이센스

MIT License - 자유롭게 사용, 수정, 배포 가능합니다.

---

## 🙏 감사의 말

- **Chainlit**: 훌륭한 웹 UI 프레임워크
- **Groq**: 빠르고 효율적인 AI 모델 API
- **사용자**: 피드백과 제안 감사합니다

---

**오늘의 자아 로그와 함께 당신의 마음을 들여다보세요 🌙**

> "감정을 기록하는 것은 자신을 알아가는 첫 걸음입니다."
